<app-navbar></app-navbar>

<div
  class="d-flex flex-column justify-content-center align-items-center h-100"
  style="background: #a1bd8f"
>
  <div *ngIf="sucess" class="alert alert-success" role="alert">
    Endereço salvo com sucesso!
  </div>
  <div class="d-flex flex-column">
    <div class="d-flex justify-content-center p-2">
      <form
        class="w-80"
        [formGroup]="enderecoForm"
        (ngSubmit)="buscarEndereco()"
      >
        <label for="cep" class="form-label">CEP</label>
        <div class="w-100 d-flex gap-2">
          <input
            type="text"
            class="form-control"
            id="cep"
            formControlName="cep"
            placeholder="Digite o CEP"
          />
          <button type="submit" class="btn btn-success search">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </form>
    </div>

    <div *ngIf="endereco">
      <form [formGroup]="enderecoForm">
        <div class="container text-start">
          <div class="row">
            <div class="col-6">
              <div class="p-2">
                <label for="logradouro" class="form-label">Logradouro</label>
                <input
                  type="text"
                  class="form-control"
                  id="logradouro"
                  placeholder="Logradouro"
                  [value]="endereco.logradouro || ''"
                  readonly
                />
              </div>
            </div>
            <div class="col-6">
              <div class="p-2">
                <label for="numero" class="form-label">Número</label>
                <input
                  type="text"
                  class="form-control"
                  id="numero"
                  formControlName="numero"
                  placeholder="Número do endereço"
                />
              </div>
            </div>
            <div class="col-6">
              <div class="p-2">
                <label for="cidade" class="form-label">Cidade</label>
                <input
                  type="text"
                  class="form-control"
                  id="cidade"
                  placeholder="Cidade"
                  [value]="endereco.localidade || ''"
                  readonly
                />
              </div>
            </div>
            <div class="col-6">
              <div class="p-2">
                <label for="estado" class="form-label">Estado</label>
                <input
                  type="text"
                  class="form-control"
                  id="estado"
                  placeholder="Estado"
                  [value]="endereco.uf || ''"
                  readonly
                />
              </div>
            </div>
          </div>
        </div>
      </form>

      <div class="container text-start">
        <div class="row">
          <div class="col-12">
            <form [formGroup]="enderecoForm">
              <div class="p-2">
                <label for="complemento" class="form-label">Complemento</label>
                <input
                  type="text"
                  class="form-control"
                  id="complemento"
                  formControlName="complemento"
                  placeholder="Complemento"
                />
              </div>
            </form>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <form [formGroup]="enderecoForm">
              <div class="p-2">
                <label for="categoria" class="form-label">Categoria</label>
                <select
                  class="form-select"
                  id="categoria"
                  formControlName="categoria"
                >
                  <option value="casa">Casa</option>
                  <option value="trabalho">Trabalho</option>
                  <option value="academia">Academia</option>
                  <option value="igreja">Igreja</option>
                  <option value="outros">Outros</option>
                </select>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="container d-flex w-100 p-2 justify-content-center">
        <button
          type="button"
          class="btn btn-success"
          (click)="salvarEndereco()"
          [disabled]="!this.enderecoForm.get('cep')?.value"
        >
          Salvar
        </button>
      </div>
    </div>
  </div>
</div>
